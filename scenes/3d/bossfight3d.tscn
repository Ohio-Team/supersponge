[gd_scene load_steps=10 format=3 uid="uid://dbfmy7gxj813y"]

[ext_resource type="PackedScene" uid="uid://d2jf2vdsqv0nu" path="res://assets/3d/ohiomonster/stage.blend" id="1_yv50q"]
[ext_resource type="PackedScene" uid="uid://dwm7vih3bgtyv" path="res://scenes/3d/firstpersonshooter.tscn" id="2_1exyh"]

[sub_resource type="GDScript" id="GDScript_3bjgi"]
resource_name = "3dfight"
script/source = "extends Node3D

# Called every frame. 'delta' is the elapsed time since the previous frame.
func _ready() -> void:
	Ui.ohiohealth.show()
	Singleton.save_game()
	MusicPlayer.play_song(\"res://assets/music/ohiomonsterbattle.ogg\")
	Ui.create_dialog(\"Let's kill this guy.\")
	
"

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_avwtu"]
sky_top_color = Color(0, 0, 0, 1)
sky_horizon_color = Color(0.55, 0.54225, 0.53325, 1)
ground_horizon_color = Color(0.55, 0.54225, 0.53325, 1)

[sub_resource type="Sky" id="Sky_c18tr"]
sky_material = SubResource("ProceduralSkyMaterial_avwtu")

[sub_resource type="Environment" id="Environment_8v0p3"]
background_mode = 2
sky = SubResource("Sky_c18tr")
tonemap_mode = 2
glow_enabled = true

[sub_resource type="NavigationMesh" id="NavigationMesh_akx08"]
vertices = PackedVector3Array(6.75, 1.5, -1.25, 8, 1.5, -1.5, 8, 1.5, -2, 6.25, 1.5, -6.25, 0.25, 1.5, -8.75, 6.25, 1.5, 6.25, 8, 1.5, 2, 6.75, 1.5, 1.5, -8.75, 1.5, -0.25, -6.25, 1.5, 6.25, -0.25, 1.5, 8.75, -6.25, 1.5, -6.25, 7.75, 7.25, -0.5, 7.75, 7.25, 0.5, 8.5, 7.25, 0.5, 8.5, 7.25, -0.5, 8, 1.5, -0.25, 8, 1.5, 0.5, 8.75, 1.5, 0.25, 8.75, 1.5, -0.25)
polygons = [PackedInt32Array(1, 0, 2), PackedInt32Array(2, 0, 3), PackedInt32Array(3, 0, 4), PackedInt32Array(7, 6, 5), PackedInt32Array(11, 4, 8), PackedInt32Array(8, 4, 9), PackedInt32Array(9, 4, 10), PackedInt32Array(10, 4, 0), PackedInt32Array(7, 5, 0), PackedInt32Array(0, 5, 10), PackedInt32Array(15, 14, 12), PackedInt32Array(12, 14, 13), PackedInt32Array(19, 18, 16), PackedInt32Array(16, 18, 17)]

[sub_resource type="GDScript" id="GDScript_45v2q"]
resource_name = "sin"
script/source = "extends Area3D


var health:float = 250


func _on_area_entered(area: Area3D) -> void:
	if area.is_in_group(\"Projectiles\"):
		health -= 10
		Ui.ohiohealth.text = \"Ohio Healh: \" + str(health)
		BMOD.play_sfx_3d(preload(\"res://assets/sfx/cjhurt.tres\"),position)
		area.queue_free()
		var monsterling = preload(\"res://scenes/3d/ohiomonster3d.tscn\")
		var newmonsterling = monsterling.instantiate()
		newmonsterling.position = Vector3(0,2,0)
		get_tree().current_scene.add_child(newmonsterling)


func _on_timer_timeout() -> void:
	var monsterling = preload(\"res://scenes/3d/ohiomonster3d.tscn\")
	var newmonsterling = monsterling.instantiate()
	newmonsterling.position = Vector3(0,5,0)
	get_tree().current_scene.add_child(newmonsterling)
"

[sub_resource type="BoxShape3D" id="BoxShape3D_swyyi"]
size = Vector3(1, 2.13422, 1.69489)

[node name="Bossfight3d" type="Node3D"]
script = SubResource("GDScript_3bjgi")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(-0.866023, -0.433016, 0.250001, 0, 0.499998, 0.866027, -0.500003, 0.749999, -0.43301, 0, 0, 0)
light_color = Color(0.103744, 0.103744, 0.103744, 1)
light_energy = 0.0
shadow_enabled = true

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_8v0p3")

[node name="NavigationRegion3D" type="NavigationRegion3D" parent="."]
navigation_mesh = SubResource("NavigationMesh_akx08")

[node name="stage" parent="NavigationRegion3D" instance=ExtResource("1_yv50q")]

[node name="OmniLight3D" type="OmniLight3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 7.21319, 8.32798, 0)

[node name="firstpersonshooter" parent="." instance=ExtResource("2_1exyh")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.0295699, 1.11333, -1.45642)

[node name="Ohio of Sin" type="Area3D" parent="."]
script = SubResource("GDScript_45v2q")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Ohio of Sin"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 9.24002, 8.03671, 0.000335693)
shape = SubResource("BoxShape3D_swyyi")

[node name="Timer" type="Timer" parent="Ohio of Sin"]
wait_time = 5.0
autostart = true

[connection signal="area_entered" from="Ohio of Sin" to="Ohio of Sin" method="_on_area_entered"]
[connection signal="timeout" from="Ohio of Sin/Timer" to="Ohio of Sin" method="_on_timer_timeout"]
